<section class="{{ include.background }} padding-top-{{ include.padding-top }} padding-bottom-{{ include.padding-bottom }}">
    <div class="container-padding">
        <div class="selector">
            <div class="options">
                <div class="note method">
                    <div class="option-label">NOTICES</div>
                    <div class="option-notice">
                        <span>
                            <i class="fas fa-exclamation-triangle text-white"></i> <a href="https://docs.rapids.ai/notices/rsn0002">Python 3.6 & CUDA 10.0</a> EOL in v0.14
                        </span>
                    </div>
                    <div class="option-notice">
                        <span>
                            <i class="fas fa-bullhorn text-white"></i> Google Colab RAPIDS <a href="https://docs.rapids.ai/notices/rgn0005">support limited</a> to v0.14
                        </span>
                    </div>

                </div>
                <div class="note method padding-bottom-4em">
                    <div class="option-label"></div>
                    <div class="option-notice">
                        <span>
                            <i class="fas fa-bullhorn text-white"></i> RAPIDS <a href="https://docs.rapids.ai/notices/rdn0001">dask-xgboost</a> library is deprecated in v0.15 and removed in v0.16
                        </span>
                    </div>
                </div>
                <div class="preferred">
                    <div class="option-label"></div>
                    <div class="option-blank">
                        <span>
                            <i class="fas fa-level-up-alt fa-rotate-180 fa-down-6"></i> <i class="fas fa-check-square text-blue"></i> Preferred <i class="fas fa-level-down-alt fa-down-6"></i>
                        </span>
                    </div>
                    <div class="option-blank">
                        <span>
                            <i class="fas fa-level-up-alt fa-rotate-180 fa-down-6"></i> <i class="fas fa-flask text-orange"></i> Advanced <i class="fas fa-level-down-alt fa-down-6"></i>
                        </span>
                    </div>
                </div>
                <div class="method padding-bottom-1em">
                    <div class="option-label">Method</div>
                    <div id="conda" class="option" title="Conda install">Conda&nbsp;<i class="fas fa-box-open"></i> <span class="context"> <i class="fas fa-check-square text-blue"></i> Preferred Install Method</span></div>
                    <div id="docker" class="option" title="Docker image with example notebooks">Docker + Examples&nbsp;<i class="fab fa-docker"></i><span class="context"> <i class="fas fa-check-square text-blue"></i> Preferred Install Method</span></div>
                    <div id="dev" class="option advanced" title="Docker image with developer tools and from source build environment ">Docker + Dev Env&nbsp;<i class="fab fa-docker"></i> <span class="context"> <i class="fas fa-flask text-orange"></i> Advanced Install Method</span></div>
                    <div id="source" class="option advanced" title="From source build">Source&nbsp;<i class="fas fa-cogs"></i><span class="context"> <i class="fas fa-flask text-orange"></i> Advanced Install Method</span></div>
                </div>
                <div class="release">
                    <div class="option-label">Release</div>
                    <div id="legacy" class="option">Legacy ({{ site.data.releases.legacy-version }})</div>
                    <div id="stable" class="option">Stable ({{ site.data.releases.stable-version }})</div>
                    <div id="nightly" class="option">Nightly ({{ site.data.releases.nightly-version }}a)</div>
                </div>
                <div class="type">
                    <div class="option-label">Type</div>
                    <div id="rapids" class="option">RAPIDS Only</div>
                    <div id="blazing" class="option">RAPIDS with BlazingSQL</div>
                </div>
                <div class="pkg">
                    <div class="option-label">Packages</div>
                    <div id="all" class="option">All Packages</div>
                    <div id="cudf" class="option">cuDF</div>
                    <div id="cuml" class="option">cuML</div>
                    <div id="cugraph" class="option">cuGraph</div>
                    <div id="cusignal" class="option">cuSignal</div>
                    <div id="cuspatial" class="option">cuSpatial</div>
                    <div id="cuxfilter" class="option">cuxfilter</div>
                </div>
                <div class="linux">
                    <div class="option-label">Linux</div>
                    <div id="ubuntu1604" class="option">Ubuntu 16.04&nbsp;<i class="fab fa-ubuntu"></i></div>
                    <div id="ubuntu1804" class="option">Ubuntu 18.04&nbsp;<i class="fab fa-ubuntu"></i></div>
                    <div id="centos7" class="option">CentOS 7&nbsp;<i class="fab fa-centos"></i></div>
                    <div id="rhel7" class="option">RHEL 7&nbsp;<i class="fab fa-redhat"></i></div>
                </div>
                <div class="python">
                    <div class="option-label">Python</div>
                    <div id="py37" class="option">Python 3.7</div>
                    <div id="py38" class="option">Python 3.8</div>
                </div>
                <div class="cuda">
                    <div class="option-label">CUDA</div>
                    <div id="cuda101" class="option">CUDA 10.1.2</div>
                    <div id="cuda102" class="option">CUDA 10.2</div>
                    <div id="cuda110" class="option">CUDA 11.0</div>
                </div>
                <div class="preferred">
                    <div class="option-label"></div>
                    <div class="option-blank"></div>
                    <div class="option-blank"></div>
                    <div class="option-blank"></div>
                    <div class="option-blank"></div>
                </div>
                <div class="note">
                    <div class="option-label"></div>
                    <div class="option-blank">
                        <span id="rhel7-conda-note" class="hidden option-note">
                            <i class="fas fa-exclamation-triangle text-orange"></i> <b>NOTE:</b> RHEL 7 <code>conda</code> support is provided by builds and tests on CentOS 7.<br/>The same <code>conda create</code> commands should work with <code>gcc >=7.5</code> and the correct NVIDIA and CUDA drivers.
                        </span>
                        <span id="rhel7-source-note" class="hidden option-note">
                            <i class="fas fa-exclamation-triangle text-orange"></i> <b>NOTE:</b> RHEL 7 from source build support is provided by following the build instructions for CentOS 7.<br/>The same methods should work with <code>gcc >=7.5</code> and the correct NVIDIA and CUDA drivers.
                        </span>
                        <span id="linux-conda-note" class="hidden option-note">
                            <i class="fas fa-info-circle text-blue"></i> <b>NOTE:</b> Ubuntu 16.04/18.04 & CentOS 7 use the same <code>conda create</code> commands.
                        </span>
                        <span id="linux-source-note" class="hidden option-note">
                            <i class="fas fa-info-circle text-blue"></i> <b>NOTE:</b> Ubuntu 16.04/18.04 & CentOS 7 use the same from source build instructions.
                        </span>
                        <span id="blazing-dev-note" class="hidden option-note">
                            <i class="fas fa-info-circle text-blue"></i> <b>NOTE:</b> RAPIDS with BlazingSQL is only available as a <b>Docker + Dev Env</b> for v0.16/0.17. Additional install options, coming soon.
                        </span>
                    </div>
                </div>
            </div>
            <div class="cmd">
                <div class="cmd-label">Command</div>
                <div id="command" class="cmd-box"><div class="highlight"><pre class="highlight"><code><span class="gh"># Javascript is needed for this tool to run, please make sure it is enabled</span></code></pre></div></div>
            </div>
        </div>
        <div class="selector-buttons">
            <a id="copy-command" onclick="CopyToClipboard('command-code')" class="primary-btn">COPY COMMAND <i class="fas fa-clipboard"></i></a>
            <a id="reset-selector" onclick="resetSelector()" class="primary-btn">RESET SELECTOR <i class="fas fa-undo"></i></a>
        </div>
    </div>
</section>
<script type="text/javascript">
/* Adopted from https://pytorch.org/assets/quick-start-module.js */
var pkg = ["cudf", "cuml", "cugraph", "cusignal", "cuspatial", "cuxfilter", "all"];
var method = ["conda", "docker", "source", "dev"];
var release = ["legacy", "stable", "nightly"];
var type = ["rapids", "blazing"];
var linux = ["ubuntu1604", "ubuntu1804", "centos7", "rhel7"];
var python = ["py37", "py38"];
var cuda = ["cuda101", "cuda102", "cuda110"];
var pkg_opts = $(".pkg > .option");
var method_opts = $(".method > .option");
var release_opts = $(".release > .option");
var type_opts = $(".type > .option");
var linux_opts = $(".linux > .option");
var python_opts = $(".python > .option");
var cuda_opts = $(".cuda > .option");
var details = {
    conda: "conda-install",
    docker: "docker-container",
    pip: "pip-install",
    source: "build-from-source"
}
// Set initial choices
var selections = {
    pkg: "all",
    method: "conda",
    release: "stable",
    type: "rapids",
    linux: "ubuntu1604",
    python: "py37",
    cuda: "cuda101"
};
// Save default choices
var default_selections = Object.assign({}, selections);
// Setup listeners
pkg_opts.on("click", function() {
    processClick(pkg_opts, this, "pkg");
});
method_opts.on("click", function() {
    processClick(method_opts, this, "method");
});
release_opts.on("click", function() {
    processClick(release_opts, this, "release");
});
type_opts.on("click", function() {
    processClick(type_opts, this, "type");
});
linux_opts.on("click", function() {
    processClick(linux_opts, this, "linux");
});
python_opts.on("click", function() {
    processClick(python_opts, this, "python");
});
cuda_opts.on("click", function() {
    processClick(cuda_opts, this, "cuda");
});

// Initialize on start
$(function() {
    processClick();
});

// Reset all options
function resetAll() {
    $(method_opts).removeClass("disabled");
    $(pkg_opts).removeClass("disabled");
    $(release_opts).removeClass("disabled");
    $(type_opts).removeClass("disabled");
    $(linux_opts).removeClass("disabled");
    $(python_opts).removeClass("disabled");
    $(cuda_opts).removeClass("disabled");
    $(method_opts).removeClass("active");
    $(pkg_opts).removeClass("active");
    $(release_opts).removeClass("active");
    $(type_opts).removeClass("active");
    $(linux_opts).removeClass("active");
    $(python_opts).removeClass("active");
    $(cuda_opts).removeClass("active");
}

// Reset to default choices
function resetSelector() {

    selections = Object.assign({}, default_selections);
    processClick();
}

// Process clicks on options
function processClick(options, click, category) {
    // Reset the board
    resetAll();

    // Hide linux/rhel notes
    $("#rhel7-conda-note").addClass("hidden");
    $("#rhel7-source-note").addClass("hidden");
    $("#linux-conda-note").addClass("hidden");
    $("#linux-source-note").addClass("hidden");
    $("#blazing-dev-note").addClass("hidden");

    // Record selection
    if (click && category) {
        selections[category] = click.id;
    }

    // Handle blazing type
    if (selections["type"] == "blazing") {
        // Display Blazing note
        $("#blazing-dev-note").removeClass("hidden");

        // Override selections for what is available in blazing dev image
        selections["method"] = "dev";
        if (selections["linux"] == "rhel7") {
            selections["linux"] = "centos7";
        }
        if (selections["release"] == "legacy") {
            selections["release"] = "stable";
        }
        selections["pkg"] = "all";
        $("#rhel7").addClass("disabled");
        $(method_opts).addClass("disabled");
        $("#dev").removeClass("disabled");
        $("#legacy").addClass("disabled");
        $(pkg_opts).addClass("disabled");
        $("#all").removeClass("disabled");
    } else if (selections["type"] == "rapids") {
        // Handle rapids type

        if (selections["method"] == "conda") {
            // Handle conda requests
            if (selections["linux"] == "rhel7") {
                // Display RHEL note
                $("#rhel7-conda-note").removeClass("hidden");
            } else {
                // Display linux note
                $("#linux-conda-note").removeClass("hidden");
            }
        } else if (selections["method"] == "docker") {
            // Handle docker requests
            if (selections["linux"] == "rhel7") {
                selections["linux"] = "centos7";
            }
            $("#rhel7").addClass("disabled");
            $(pkg_opts).addClass("disabled");
            selections["pkg"] = "all";
            $("#all").removeClass("disabled");
        } else if (selections["method"] == "source") {
            // Handle source requests
            $("#all").addClass("disabled");
            if (selections["pkg"] == "all") {
                selections["pkg"] = "cudf";
            }
            if (selections["linux"] == "rhel7") {
                // Display RHEL note
                $("#rhel7-source-note").removeClass("hidden");
            } else {
                // Display linux note
                $("#linux-source-note").removeClass("hidden");
            }
            $(python_opts).removeClass("active");
            $(cuda_opts).removeClass("active");
            $(python_opts).addClass("disabled");
            $(cuda_opts).addClass("disabled");
        } else if (selections["method"] == "dev") {
            // Handle dev requests
            if (selections["linux"] == "rhel7") {
                selections["linux"] = "centos7";
            }
            selections["pkg"] = "all";
            $("#rhel7").addClass("disabled");
            $(pkg_opts).addClass("disabled");
            $("#all").removeClass("disabled");
            $(method_opts).removeClass("disabled");
            $(release_opts).removeClass("disabled");
        }
    }

    // Mark active options
    $("#" + selections["method"]).addClass("active");
    $("#" + selections["pkg"]).addClass("active");
    $("#" + selections["linux"]).addClass("active");
    $("#" + selections["python"]).addClass("active");
    $("#" + selections["cuda"]).addClass("active");
    $("#" + selections["release"]).addClass("active");
    $("#" + selections["type"]).addClass("active");

    showCommand();
}

function getSelections() {
    if (selections["method"] == "source") {
        return "" + selections["release"] + "-" + selections["pkg"] + "-" + selections["method"];
    } else if (selections["method"] == "conda") {
        return "" + selections["release"] + "-" + selections["type"] + "-" + selections["pkg"] + "-" + selections["method"] + "-" + selections["python"] + "-" + selections["cuda"];
    } else {
        return "" + selections["release"] + "-" + selections["type"] + "-" + selections["pkg"] + "-" + selections["method"] + "-" + selections["linux"] + "-" + selections["python"] + "-" + selections["cuda"];
    }
}

function showCommand() {
    var key = getSelections();
    var command = $("." + key).html();
    var anchor = details[selections["method"]];
    var txt = ("" + selections["method"] + " details").toUpperCase();
    $("#command").html(command);
    $("#command > div > pre > code ").attr("id", "command-code")
}

function CopyToClipboard(containerid) {
    if (document.selection) { //IE
        var range = document.body.createTextRange();
        range.moveToElementText(document.getElementById(containerid));
        range.select();
        document.execCommand("copy");
    } else if (window.getSelection) { //others
        var range = document.createRange();
        range.selectNode(document.getElementById(containerid));
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);
        document.execCommand("copy");
    }
}
</script>
<!--
    FYI commands moved to "selector-commands-*.html" one for each release type:
      - selector-commands-legacy.html
      - selector-commands-stable.html
      - selector-commands-nightly.html
-->
